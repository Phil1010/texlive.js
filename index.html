<!doctype html>
<html>

<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <script src="promisejs/promise.js"></script>
  <script src="pdftex.js"></script>
</head>

<body>
  <div id="tabs">
    <div class="tab" id="tab_input">
      <textarea rows="10" id="input">
\documentclass{article}
\begin{document}
Hello, LaTeX!
\end{document}
        </textarea>
      <br />
      <button id="compile">Compile this LaTeX code to a PDF</button>
    </div>
  </div>

  <script>
    var compile = function (source_code) {
      var pdftex = new PDFTeX();
      console.log(pdftex);
      return pdftex.compile(source_code);
    }

    document.getElementById("compile").addEventListener("click", function (e) {
      var source_code = document.getElementById("input").value;
      compile(source_code).then(function (pdf) {
        // PDF compilation completed
        // Use 'pdf' variable as desired
        console.log(pdf);
        // Example: Download PDF
        var link = document.createElement('a');
        link.href = pdf;
        link.download = 'output.pdf';
        link.click();
      });
    });
  </script>
</body>

</html>